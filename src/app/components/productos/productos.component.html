<div class="text">
    <h1>Inventario</h1>    
</div>

<div class="text herramientas">
    <div>
        <i class='bx bx-search icon' ></i>
        <span>Buscar...</span>
    </div>

    <div>
        <i class='bx bx-filter icon'></i>
        <span>Filtrar</span>
    </div>
</div>

<div class="text agregar">
    <a class="button">Agregar Producto</a>
</div>

<section class="text productos" *ngFor="let producto of listProductos">
    <div class="producto">
        <div class="detalle-usuario">
            <span class="info-usuario">
                <h3>{{producto.nombre}}</h3>
            </span>
            <span>
                <a class="button" (click)="modalActualizar(producto)">
                    <i class='bx bx-edit icon'></i>
                </a>
                <a class="button" (click)="modalEliminar(producto.idProducto)">
                    <i class='bx bx-trash icon'></i>
                </a>
            </span>
        </div>
        <div>
            <span>{{producto.descripcion}}</span>
        </div>

        <div class="detalle-producto">
            <span>Cod. Prod: {{producto.idProducto}}</span>

            <span>Color: 
                <select id="colores" (change)="onColorSelected($event)">
                    <option *ngFor="let color of producto.colores" [value]="color.nombre">{{ color.nombre }}</option>
                </select>
            </span>

            <span>Precio: S/. {{producto.precio}}</span>
        
            <span>Código de Barras: {{getCodigoBarras(producto.idProducto)}}</span>
        </div>
        <div *ngIf="selectedColor">
            <h4>Tallas y Cantidades:</h4>
            <div *ngFor="let talla of getTallasPorColor(selectedColor)">
                {{ talla.talla }} - Cantidad: {{ talla.cantidad }}
            </div>
        </div>
    </div>
</section>


<!-- MODAL PARA ACTUALIZAR PRODUCTO -->
<div class="modal" *ngIf="showModalActualizarProducto">
    <div class="modal-content text">
        <div class="modal-header">
            <h2>Actualizar Producto</h2>
        </div>
        <div class="modal-body">
            <form [formGroup]="formProducto">
                <div class="form-content">
                    <strong>
                        Nombre:
                    </strong>
                    <input type="text" formControlName="nombre">
                </div>
                <div class="form-content">
                    <strong>
                        Descripcion
                    </strong>
                    <input type="text" formControlName="descripcion">
                </div>
                <div class="form-content">
                    <strong>
                        Precio:
                    </strong>
                    <input type="number" formControlName="precio">
                </div>
            </form>
            <div class="modal-footer">
                <a class="button" (click)="cancelar()">Cancelar</a>
                <a class="button" (click)="update()">Actualizar</a>
            </div>
        </div>
    </div>
</div>



<!-- MODAL PARA ELIMINAR USUARIO -->
<div class="modal" *ngIf="showModalEliminarProducto">
    <div class="modal-content text">
        <div class="modal-header">
            <i class='bx bx-error'></i>
            <h2>¿Deseas eliminar este Producto?</h2>
        </div>
        <div class="modal-footer">
            <a class="button" (click)="delete()">Sí</a>
            <a class="button" (click)="cancelar()">No</a>
        </div>
    </div>
</div>